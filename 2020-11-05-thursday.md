[Markdown Cheatsheet](https://guides.github.com/pdfs/markdown-cheatsheet-online.pdf)

# 5.11.2020, Donnerstag

## Anwesenheit

![Anwesenheit 4.11](images/Teilnehmer_2020-11-04.png)

## Tagesablauf

- 9:30 Uhr Leon und Phillip sind guter Stimmung!

## Inhalte des Tages

- Github Student
- JSON Server
- useEffect()
- TrophyHunter

## 🎊 Karneval 🎉

- Ideen dazu [ins Scrumblerboard](https://scrumlr.io/#/board/-MLHKV8Y7pwsxs9QUzTu)
- PartyZoom [gibts hier](https://hubs.mozilla.com/)

## Github Students ProVersion

[Github Education Page](http://education.github.com/pack)

- persönlichen Link erhalten
- Empfehlung: Frontend Masters, Heroku

## Ausbilungsinhalte

- Leon zeigt ein Zertifikat vom letzten Kurs, wir haben ca. 60% schon durch und sind bei der Hälfte des Kurses
- Themen werden auf uns angepasst

## Fragen Fragen Fragen

- ⛵️ [Tailwind CSS](https://tailwindcss.com), what is it and why to use it?

  - Komponentenbasiert
  - 1kB package size , `Bootstrap` hat 60kB
  - gerne nutzen, aber auch verstehen was die Frameworks machen

- Debugging in Chrome

  - Bei verschachtelten if-Statements für die entsprechende Abfrage eine Funktion schreiben, diese kann man dann debuggen

  ```js
  // Vorher
  if(
    (i >= 51 && i <= 55) ||
      (i >= 43 && i <= 47) ||
      (i >= 35 && i <= 39) ||
      (i >= 27 && i <= 31) ||
      (i >= 19 && i <= 23) ||
      (i >= 11 && i <= 15) ||
      ) {
        ...
      }
  ```

  ```js
  // Nachher
    function isNumberWithin(number, start, end){
      return number >= start && number <= end;}
    if(
       isNumberWithin(i, 51, 55)||
       isNumberWithin(i, 43, 47)||
       isNumberWithin(i, 35, 39)||
       isNumberWithin(i, 27, 31)||
       isNumberWithin(i, 19, 23)||
       isNumberWithin(i, 11, 15)||
      ) {
        ...
      }
  ```

## Lets go Wishlist 🚀

- **Wiederholung**: Leon programmiert die Routen die wir gestern schon geschrieben haben
- **ProTipp**: Links ins Urls in Kleinbuchstaben `<Link to="/wishlist">`
- **Dynamische Routen:**

  - Phillipps Wishlist hat nen anderen Link als z.B. Leons
  - **Stichwort** [URL Parameters](https://reactrouter.com/web/example/url-params)

  - mit dem Hook `useParams()` können wir Variablen für die Pfade nutzen um diese dynamisch zu machen

  ```jsx
  // in der app.js gibts ne ne neue Route
  <Route path="/:name">
    <Wishlist />
  </Route>
  ```

  ```jsx
  // In der Wishlist
  export default function Wishlist() {
    const { name } = useParams();
    return (
      <div>
        <p> {name}</p>
      </div>
    );
  }
  ```

  - gutes Beispiel in der reactrouter Docu [URL Parameters](https://reactrouter.com/web/example/url-params)

<hr>
Mittagspause
<hr>

## JSON-Server

- Wie machen wir das ganze dynamisch -> [JSON-Server](https://github.com/typicode/json-server)
- kann per npm installiert werden
- Faked eine RESTful API bereit
  - but what is RESTfull?
    - POST, GET, DELETE... Requests sind möglich
      RESSOURCE

### How to install

- nicht global installieren, sondern per npx ausführen `npx json-server --watch db.json --port 5000`
- db.json Datei anlegen und BeispielCode einfügen
  ```json
  {
    "posts": [{ "id": 1, "title": "json-server", "author": "typicode" }],
    "comments": [{ "id": 1, "body": "some comment", "postId": 1 }],
    "profile": { "name": "typicode" }
  }
  ```
- nun kann man auf `localhost:5000/posts` alle Posts aus der DB aufrufen
- jetzt noch eine Funktion um die Daten abzurufen:

```jsx
// lists.js
export async function getLists(){
  const response = await fetch("https://localhost:5000/lists)
  const lists = await response.json()
  return lists
}
```

#### useEffect()-Hook

- wird genutzt um z.B. zum Start Code einmalig auszuführen, oder um Code in Abhängigkeit auszuführen
- wir nutzen das nun, um unseren JSON-Server abzufragen

```jsx
// in der Home.js
const Home = () => {
 const [(lists, setLists)] = useState(null);
    // für den ersten Mount (Seitenaufbau)
  useEffect(async () => {
    const newLists = await getLists();
    setLists(newLists);
  },[]);
  return (
    <div>
      Home
      {lists.map((list) => (
        <Link key={list.id} to={"/${list.id"}>
          {list.title}
        </Link>
      ))}
      <Link to="/add">Add</Link>
    </div>
  );
};
```

- Aufgabe nun das zu implementieren und die db.json mit noch mehr Inhalten zu füllen

- [Link zu Leons PR](https://github.com/phlgr/wuensch-dir-was/pull/6)

## 💥Merge-Conflict💥

```jsx
$ git checkout master
Merge Konflikt lösen
(incoming/current Changes in VSCode auswählen)
$ git commit -am "Konflit gelöst"
```

## Detailseite

- wir füllen diese nun mit Daten aus der JSON-Server API
- erstmal neue Funktion erstellen, die Daten über die ID abruft

```JSX
export function getListByID(id){
  const response = await fetch(`http://localhost:5000/lists/${id}`)
  const list = await response.json()
  return list
}
```

---

Aufgabe

- das ganze einbinden

---

- nun wird in der Wishlist ein neuer useState verwendet um einen Listeneintrag abzuspeichern, dieser wird über `useEffect()` abgerufen:

```jsx
export default function Wishlist() {
  const { id } = useParams();
  const [listItem, setListItem] = useState(null);
  useEffect(async () => {
    const entry = await getListByID(id);
    setListItem(entry);
  }, []);
  return (
    <div>
      <p>neuer Fetch {listItem?.title}</p>
      <Link to="/">
        <Button>Back</Button>
      </Link>
    </div>
  );
}
```

- auf der Startseite wirdnun der Pfad angepasst, sodass wir am Ende auf der ID landen und diese übergeben wird

```jsx
export default function Home() {
  const [lists, setLists] = useState(null);
  useEffect(async () => {
    const newLists = await getLists();
    setLists(newLists);
  }, []);
  return (
    <List>
      {lists?.map((list) => (
        <Link key={list.id} to={`/${list.id}`}>
          {list.title}s Wishlist
        </Link>
      ))}
      <Button navigation>+</Button>
    </List>
  );
}
```

- und in der App.js muss die Route angepasst werden

```jsx
// in der App.js anstelle von :name steht nun :id
<Switch>
  <Route exact path="/">
    <Home />
  </Route>
  <Route path="/add">
    <AddPage />
  </Route>
  <Route path="/:id">
    <Wishlist />
  </Route>
</Switch>
```

## Nun werden die Wunschlisten befüllt

```json
{
  "lists": [
    { "id": 1, "title": "Benji", "items": ["ein geschenk", "Socken"] },
    { "id": 2, "title": "Laura", "items": ["ein geschenk", "Socken"] },
    { "id": 3, "title": "Bela", "items": ["ein geschenk", "Socken"] },
    { "id": 4, "title": "Leon", "items": ["ein geschenk", "Socken"] },
    { "id": 5, "title": "Phillipp", "items": ["ein geschenk", "Socken"] },
    { "id": 6, "title": "Anne", "items": ["ein geschenk", "Socken"] },
    { "id": 7, "title": "Johannes", "items": ["ein geschenk", "Socken"] },
    { "id": 8, "title": "Manfred", "items": ["ein geschenk", "Socken"] }
  ]
}
```

- und in der Wishlist durch die Items gemapped

```jsx
export default function Wishlist() {
  const { id } = useParams();
  const [listItem, setListItem] = useState(null);
  useEffect(async () => {
    const entry = await getListByID(id);
    setListItem(entry);
  }, []);
  return (
    <div>
      <p> {listItem?.title}s Wunschliste </p>
      {listItem?.items.map((item) => {
        return <div className="wish">{item}</div>;
      })}
      <Link to="/">
        <Button>Back</Button>
      </Link>
    </div>
  );
}
```

## JSON-Server #2

- einen neuen Eintrag hinzufügen geht auch!
  ![Post Request in Postman](./images/PostRequest.png)
- same same mit DELETE
- und viele weitere tolle Sachen die man in den JSON-Server Doks nachlesen kann [click me if you can](https://github.com/typicode/json-server)
- morgen machen wir mit POST und DELETE weiter 🚀🚀🚀🚀🚀🚀🚀🚀

### Trophy Hunter von Leon, kurzer Einblick

- [Link zum Contest](overwolf.com/contest/lol-challenge-2016)
- man lernt viel,
